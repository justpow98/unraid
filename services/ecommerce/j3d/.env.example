# J3D - Etsy Orders & Filament Tracker
# Environment Configuration for Unraid Deployment

# System Configuration
TZ=US/Eastern
HOST_HOSTNAME=JP-Dell
PUID=99
PGID=100

# Application paths
APPDATA_PATH=/mnt/user/appdata

# Version
J3D_VERSION=2.0.0

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL password - CHANGE THIS!
POSTGRES_PASSWORD=changeme

# ============================================
# FLASK BACKEND CONFIGURATION
# ============================================
# Secret key for session management - Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-generated-secret-key-here

# ============================================
# ETSY OAUTH CONFIGURATION
# ============================================
# Get these from your Etsy App Keys page: https://www.etsy.com/developers/your-apps
ETSY_CLIENT_ID=your_etsy_client_id
ETSY_CLIENT_SECRET=your_etsy_client_secret

# Should match your Nginx Proxy Manager domain/port
# Example: https://j3d.yourdomain.com/oauth-callback
ETSY_REDIRECT_URI=https://j3d.yourdomain.com/oauth-callback

# ============================================
# NGINX PROXY MANAGER INTEGRATION
# ============================================
# To expose J3D frontend through nginx-proxy-manager:
# 1. Add proxy host: j3d.yourdomain.com -> j3d-frontend:4200
# 2. Add SSL certificate (Let's Encrypt recommended)
# 3. Update ETSY_REDIRECT_URI above

# ============================================
# BACKUP RECOMMENDATIONS
# ============================================
# PostgreSQL backups are stored in: ${APPDATA_PATH}/j3d/postgres/backups
# 
# Create a backup with:
# docker exec j3d-postgres pg_dump -U j3d_user j3d > /mnt/user/appdata/j3d/postgres/backups/backup-$(date +%Y%m%d).sql
#
# Add to Unraid's backup schedule or use Community Scripts

# ============================================
# ADDITIONAL NOTES
# ============================================
# - Networks (internal_net, public_net, db_net) must be created in Unraid
# - Frontend uses environment.prod.ts (apiUrl: '/api')
# - Backend proxy configured in nginx-proxy-manager
# - All containers run as non-root user (PUID:PGID)
# - Health checks enabled for all services
