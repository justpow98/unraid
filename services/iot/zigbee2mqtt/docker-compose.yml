# ============================================================================
# services/iot/zigbee2mqtt/docker-compose.yml
# ============================================================================
version: '3.8'

services:
  zigbee2mqtt:
    image: koenkk/zigbee2mqtt:1.41.0
    container_name: zigbee2mqtt
    restart: unless-stopped
    environment:
      - TZ=${TZ}
      - HOST_OS=Unraid
      - HOST_HOSTNAME=JP-Dell
      - HOST_CONTAINERNAME=zigbee2mqtt
    volumes:
      - ${HOME_ASSISTANT_PATH}/zigbee2mqtt:/app/data
      - /run/udev:/run/udev:ro
    ports:
      - "9442:8080"
    labels:
      - "kuma.zigbee2mqtt.type=http"
      - "kuma.zigbee2mqtt.url=http://zigbee2mqtt:8080"
      - "kuma.zigbee2mqtt.name=Zigbee2MQTT"
      - "kuma.zigbee2mqtt.interval=60"
      - "kuma.zigbee2mqtt.keyword=Zigbee2MQTT"
      - "kuma.zigbee2mqtt.tags=iot,zigbee"
      # Keep existing Unraid labels
      - "net.unraid.docker.icon=https://raw.githubusercontent.com/selfhosted/unRAID-CA-templates/master/templates/img/zigbee2mqtt-icon.png"
      - "net.unraid.docker.webui=http://[IP]:[PORT:9442]"
    networks:
      - iot_net
    privileged: true

networks:
  iot_net:
    external: true